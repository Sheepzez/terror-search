<!DOCTYPE html>
<html>


<head>
<title>Query Results</title>
<meta charset='UTF-8'>
{% load staticfiles %}
<!--<script src='d3.js'></script>-->
<script src='{% static 'jquery-2.1.1.js' %}' type='text/javascript'></script>
<script src='{% static 'insertData.js' %}' type='text/javascript'></script>
<link rel='stylesheet' type='text/css' href='{% static 'foundation.css' %}'>


</head>

<body>
<div id='Homelink'>
<a href='/'>New Query</a><br>
<form class='my-form'>
Search:<br>
<input type="text" name="query" placeholder="Your Query" ><br>
<input type="submit" value='submit'>  
</form>
</div>

<script type='text/javascript'>

function handleSecondResponse(data) {
    alert(data);

}

function handleFirstResponse(data) {
    $.get('/query?='+data,handleSecondResponse(data));

}

$('.my-form').on('submit', function () {
        alert('Form submitted!');
    //Script to call Haskell webserver function, passing {"query":"My query"}
        var query = $('#query').val();
        alert(query);
        $.getJSON('/query?='+query, function (data) {
            alert(data);
    }); //Shortcut for testing.
    //$.get('CSVSearch.com/query?='+query,handleResponse(data));
});





</script>

</body>
</html>

